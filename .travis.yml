language: c++
sudo: true
dist: trusty

notifications:
  email: false
    # on_success: never
    # on_failure: never

addons:
  apt:
    sources:
    - sourceline: 'ppa:ubuntu-sdk-team/ppa'
    - sourceline: 'ppa:beineri/opt-qt542'
    - deadsnakes
    - ubuntu-toolchain-r-test
    - chef-current-precise

    packages:
    - cmake
    - time
    - pkg-config
    - python2.7 
    - flex 
    - bison
    - gcc
    - make
    - pkg-config
    # - qtbase5-dev 
    # - qtbase5-dev-tools

cache:
  directories:
  - $HOME/ibex

matrix:
  include:
  # - os: osx
  #   compiler: clang
  - os: linux
    compiler: gcc

install:
  - bash ./build_ibex_travis.sh
  - export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:$HOME/ibex:$HOME/ibex-geometry

script:
  - sudo apt-get update
  - sudo apt-get install -y -qq qt54base qt54tools
  - if [ "${TRAVIS_OS_NAME}" = "linux" ]; then
         QTDIR="/opt/qt54"
      && PATH="$QTDIR/bin:$PATH"
      && qt54-env.sh 
      ;
    else
         QTDIR="/usr/local/opt/qt55"
      && PATH="$QTDIR/bin:$PATH"
      && LDFLAGS=-L$QTDIR/lib
      && CPPFLAGS=-I$QTDIR/include
      ;
    fi 
  - qmake -project
  - qmake integrationIBEX.pro
